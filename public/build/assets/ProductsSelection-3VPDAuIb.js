import h from"./CategoriesView-Dr8dHqFZ.js";import p from"./ProductsList-KWwEbrgT.js";import g from"./Search-D047FLZV.js";import{L as f}from"./Loader-BV8V0QoV.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{e as n,c as _,b as c,I as o,o as a}from"./app-DchwFRGs.js";const y={components:{CategoriesView:h,ProductsList:p,Search:g,Loader:f},data(){return{categories:null,products:null,searchTerm:"",selectedCategory:null}},created(){this.getStoreProductsAndCategories()},computed:{filteredProducts(){if(this.searchTerm){const e=this.searchTerm.toLowerCase();return this.products.filter(t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e))}else if(this.selectedCategory)return this.products.filter(e=>e.category_id===this.selectedCategory);return this.products}},methods:{getStoreProductsAndCategories(){axios.get("/api/store-products-categories").then(e=>{this.categories=e.data.categories,this.products=e.data.products}).catch(e=>{console.error("There was an error fetching the store products and categories:",e)})},selectCategory(e){this.selectedCategory=e},clearFilters(){this.selectedCategory=null,this.searchTerm=""}}},T={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg",id:"products-selection"},w={key:1};function L(e,t,P,S,r,i){const d=o("Loader"),l=o("Search"),u=o("CategoriesView"),m=o("ProductsList");return a(),n("div",T,[!r.categories||!r.products?(a(),_(d,{key:0})):(a(),n("div",w,[c(l,{searchTerm:r.searchTerm,"onUpdate:searchTerm":t[0]||(t[0]=s=>r.searchTerm=s)},null,8,["searchTerm"]),c(u,{categories:r.categories,onSelectCategory:i.selectCategory},null,8,["categories","onSelectCategory"]),c(m,{products:i.filteredProducts,onAddToCart:t[1]||(t[1]=s=>e.$emit("add-to-cart",s))},null,8,["products"])]))])}const b=C(y,[["render",L]]);export{b as default};
